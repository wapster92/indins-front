# Миграция с 2.9.71 на 3.0.8+.

## Listing
* Переименуйте все компоненты Listing в DynamicListing.
* В request поле DynamicListing нужно передать только результат вызова new Get(). Не нужно указывать пагинацию, коллекция это или нет и так далее. Можно передавать фильтры, но необходимо помечать их как mandatory, иначе они будут проигнорированы.
* Если в ConfigService использовался Like фильтр для поиска по текстовой строке в листинге, необходимо заменить его на Multiple фильтр.
* Переименованы пропы, которые взаимодействуют с канбаном и календарем - добавлены соответствующие префиксы (см. доки).
  
### Колонки листинга
* Все колонки более не используют свойство property. Вместо него используется свойство field. Все колонки, кроме TextColumn, могут получать в это свойство поля вложенных сущностей, разделенные точкой. Например 'user.id'.
* Все колонки, которые использовали дефолтный слот (TextColumn, RelationColumn, PhoneColumn, ListColumn, BoolColumn), кроме колонки ActionColumn переименовать в SlotColumn. Проверить всё ли работает как раньше.
* Для всех колонок в которых нужно было выводить поле из каждого элемента массива, использовать колонку ListColumn.
* В BoolColumn больше нет свойство icon, false-icon и true-icon. Если вы использовали колонку для вывода иконок на основе булевого значения, используйте IconColumn.
* EmailColumn удален. Используйте TextColumn вместо него.
* FileColumn выглядит и работает совершенно по-другому (см. доки). Если это не устраивает клиента, вытащите колонку из старой версии ядра и подключите ее.
* FirstManyInManyColumn удален. Вместо него используйте FuncColumn или SlotColumn.
* ImageBoolColumn удален. Вместо него используйте IconColumn или SlotColumn.
* IntToLabelColumn удален. Вместо него используйте TextColumn или FuncColumn.
* ListColumn был заменен другим одноименным компонентом с другим апи. Сверьтесь с документацией, чтобы получить необходимую вам информацию.
* MultipleStatusColumn удален. Вместо него используйте SlotColumn.
* StatusColumn удален. Вместо него используйте ChipColumn.
* SwitchColumn удален. Вместо него используйте SlotColumn.

### Действия над элементами листинга
* EditItem работает по-другому - см. доки.
* DeleteItem теперь зависит от того, удален элемент таблицы или нет, так что появилась возможность восстановить элемент. Чтобы выключить восстановление передайте no-restore.



## Попапы
* Form попап не будет отображаться, если в его value свойство не передать true. Также это можно сделать через v-model.
* Внутри FormPopup используется FormValidator компонент, который отвечает за валидацию. Если во вложенной форме была валидация, рекомендуется переписать ее в соответствии с новым апи.

## Формы
* Для более современной валидации необходимо обернуть все формы в FormValidator или в FormPopup и использовать новую валидацию. Валидация через v-form компонент вьютифая не поддерживается и будет работать не на всех полях ввода. Исправлять это в будущем не планируется.
* Для использования валидации и AutoSaveBlock поместите этот компонент внутрь FormValidator и используйте обработчик события save в таком виде:
```
<FormValidator v-slot="{ validate }">
  <AutoSaveBlock
    v-slot="{ throttledSave }"
    justify
    fixed
    @save="save(validate)"
  >
  <!-- Форма или форма поделенная не несколько блоков -->
  </AutoSaveBlock>
</FormValidator>
```

## Блоки
* Заменить все AppBlockWrapper компоненты на PageBlock. Убедиться, что отступы те, что нужны.


